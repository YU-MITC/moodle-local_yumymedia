{"version":3,"file":"loaduploader.min.js","sources":["../src/loaduploader.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * YU Kaltura \"My Media\" script in order to load webcam uploader with modal window.\n *\n * @copyright (C) 2016-2025 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module local_yumymedia/loaduploader\n */\n\ndefine(['jquery'], function($) {\n\n    return {\n        /**\n         * Initial function.\n         * @access public\n         * @param {string} uploaderUrl - url of simple selector page.\n         */\n        init: function(uploaderUrl) {\n\n            var timer = false;\n\n            /**\n             * This function print modal window.\n             * @access public\n             * @param {string} url - URL of module uploader web page.\n             * @return {bool} - if fade-in modal window, return true.\n             */\n            function fadeInUploaderWindow(url) {\n                // Avoidance of duplicatable execute.\n                $(this).blur(); // Unfocus base window.\n                if ($(\"#modal_window\")[0]) {\n                    return false;\n                }\n\n                // Print ovaerlay.\n                $(\"body\").append(\"<div id=\\\"uploader_content\\\"></div>\");\n                $(\"body\").append(\"<div id=\\\"modal_window\\\"></div>\");\n                $(\"#modal_window\").fadeIn(\"slow\");\n                // Centering content.\n                centeringModalSyncer(\"#uploader_content\");\n                // Fade-in content.\n                $(\"#uploader_content\").fadeIn(\"slow\");\n                // Set url of content.\n                $(\"#uploader_content\").html(\"<iframe src=\\\"\" + url + \"\\\" width=\\\"100%\\\" height=\\\"100%\\\">\");\n                // Cntering content.\n                centeringModalSyncer(\"#uploader_content\");\n\n                $(parent.window).resize(function() {\n                    centeringModalSyncer(\"#uploader_content\");\n                });\n\n                return true;\n            }\n\n            /**\n             * This function centerize modal window.\n             * @access public\n             * @param {object} contentPanel - HTML element of content panel.\n             */\n            function centeringModalSyncer(contentPanel) {\n                if (timer !== false) {\n                    clearTimeout(timer);\n                }\n\n                timer = setTimeout(function() {\n                    // Get width and height of window.\n                    var w = $(window).width();\n                    var h = $(window).height();\n\n                    // Get width and height of modal content.\n                    var cw = $(contentPanel).outerWidth();\n                    var ch = $(contentPanel).outerHeight();\n\n                    // Execute centering of modal window.\n                    $(contentPanel).css({\"left\": ((w - cw) / 2) + \"px\", \"top\": ((h - ch) / 2) + \"px\"});\n                }, 200);\n            }\n\n            $(\"#id_upload_media\").on(\"click\", function() {\n                fadeInUploaderWindow(uploaderUrl);\n            });\n        }\n    };\n});\n"],"names":["define","$","init","uploaderUrl","timer","centeringModalSyncer","contentPanel","clearTimeout","setTimeout","w","window","width","h","height","cw","outerWidth","ch","outerHeight","css","on","url","this","blur","append","fadeIn","html","parent","resize","fadeInUploaderWindow"],"mappings":";;;;;;AA0BAA,sCAAO,CAAC,WAAW,SAASC,SAEjB,CAMHC,KAAM,SAASC,iBAEPC,OAAQ,WAwCHC,qBAAqBC,eACZ,IAAVF,OACAG,aAAaH,OAGjBA,MAAQI,YAAW,eAEXC,EAAIR,EAAES,QAAQC,QACdC,EAAIX,EAAES,QAAQG,SAGdC,GAAKb,EAAEK,cAAcS,aACrBC,GAAKf,EAAEK,cAAcW,cAGzBhB,EAAEK,cAAcY,IAAI,OAAWT,EAAIK,IAAM,EAAK,UAAeF,EAAII,IAAM,EAAK,SAC7E,KAGPf,EAAE,oBAAoBkB,GAAG,SAAS,qBAnDJC,KAE1BnB,EAAEoB,MAAMC,QACJrB,EAAE,iBAAiB,KAKvBA,EAAE,QAAQsB,OAAO,qCACjBtB,EAAE,QAAQsB,OAAO,iCACjBtB,EAAE,iBAAiBuB,OAAO,QAE1BnB,qBAAqB,qBAErBJ,EAAE,qBAAqBuB,OAAO,QAE9BvB,EAAE,qBAAqBwB,KAAK,gBAAmBL,IAAM,iCAErDf,qBAAqB,qBAErBJ,EAAEyB,OAAOhB,QAAQiB,QAAO,WACpBtB,qBAAqB,yBA+BzBuB,CAAqBzB"}