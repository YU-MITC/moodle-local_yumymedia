{"version":3,"sources":["../src/loaduploader.js"],"names":["define","$","init","uploaderUrl","timer","fadeInUploaderWindow","url","blur","append","fadeIn","centeringModalSyncer","html","parent","window","resize","contentPanel","clearTimeout","setTimeout","w","width","h","height","cw","outerWidth","ch","outerHeight","css","on"],"mappings":"AA2BAA,OAAM,gCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAE3B,MAAO,CAMHC,IAAI,CAAE,cAASC,CAAT,CAAsB,CAExB,GAAIC,CAAAA,CAAK,GAAT,CAQA,QAASC,CAAAA,CAAT,CAA8BC,CAA9B,CAAmC,CAE/BL,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,GACA,GAAIN,CAAC,CAAC,eAAD,CAAD,CAAmB,CAAnB,CAAJ,CAA2B,CACvB,QACH,CAGDA,CAAC,CAAC,MAAD,CAAD,CAAUO,MAAV,CAAiB,qCAAjB,EACAP,CAAC,CAAC,MAAD,CAAD,CAAUO,MAAV,CAAiB,iCAAjB,EACAP,CAAC,CAAC,eAAD,CAAD,CAAmBQ,MAAnB,CAA0B,MAA1B,EAEAC,CAAoB,CAAC,mBAAD,CAApB,CAEAT,CAAC,CAAC,mBAAD,CAAD,CAAuBQ,MAAvB,CAA8B,MAA9B,EAEAR,CAAC,CAAC,mBAAD,CAAD,CAAuBU,IAAvB,CAA4B,iBAAmBL,CAAnB,CAAyB,oCAArD,EAEAI,CAAoB,CAAC,mBAAD,CAApB,CAEAT,CAAC,CAACW,MAAM,CAACC,MAAR,CAAD,CAAiBC,MAAjB,CAAwB,UAAW,CAC/BJ,CAAoB,CAAC,mBAAD,CACvB,CAFD,EAIA,QACH,CAOD,QAASA,CAAAA,CAAT,CAA8BK,CAA9B,CAA4C,CACxC,GAAI,KAAAX,CAAJ,CAAqB,CACjBY,YAAY,CAACZ,CAAD,CACf,CAEDA,CAAK,CAAGa,UAAU,CAAC,UAAW,IAEtBC,CAAAA,CAAC,CAAGjB,CAAC,CAACY,MAAD,CAAD,CAAUM,KAAV,EAFkB,CAGtBC,CAAC,CAAGnB,CAAC,CAACY,MAAD,CAAD,CAAUQ,MAAV,EAHkB,CAMtBC,CAAE,CAAGrB,CAAC,CAACc,CAAD,CAAD,CAAgBQ,UAAhB,EANiB,CAOtBC,CAAE,CAAGvB,CAAC,CAACc,CAAD,CAAD,CAAgBU,WAAhB,EAPiB,CAU1BxB,CAAC,CAACc,CAAD,CAAD,CAAgBW,GAAhB,CAAoB,CAAC,KAAS,CAACR,CAAC,CAAGI,CAAL,EAAW,CAAZ,CAAiB,IAA1B,CAAgC,IAAQ,CAACF,CAAC,CAAGI,CAAL,EAAW,CAAZ,CAAiB,IAAxD,CAApB,CACH,CAXiB,CAWf,GAXe,CAYrB,CAEDvB,CAAC,CAAC,kBAAD,CAAD,CAAsB0B,EAAtB,CAAyB,OAAzB,CAAkC,UAAW,CACzCtB,CAAoB,CAACF,CAAD,CACvB,CAFD,CAGH,CAtEE,CAwEV,CA1EK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * YU Kaltura \"My Media\" script in order to load webcam uploader with modal window.\n *\n * @package    local_yumymedia\n * @copyright  (C) 2016-2020 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module local_yumymedia/loaduploader\n */\n\ndefine(['jquery'], function($) {\n\n    return {\n        /**\n         * Initial function.\n         * @access public\n         * @param {string} uploaderUrl - url of simple selector page.\n         */\n        init: function(uploaderUrl) {\n\n            var timer = false;\n\n            /**\n             * This function print modal window.\n             * @access public\n             * @param {string} url - URL of module uploader web page.\n             * @return {bool} - if fade-in modal window, return true.\n             */\n            function fadeInUploaderWindow(url) {\n                // Avoidance of duplicatable execute.\n                $(this).blur(); // Unfocus base window.\n                if ($(\"#modal_window\")[0]) {\n                    return false;\n                }\n\n                // Print ovaerlay.\n                $(\"body\").append(\"<div id=\\\"uploader_content\\\"></div>\");\n                $(\"body\").append(\"<div id=\\\"modal_window\\\"></div>\");\n                $(\"#modal_window\").fadeIn(\"slow\");\n                // Centering content.\n                centeringModalSyncer(\"#uploader_content\");\n                // Fade-in content.\n                $(\"#uploader_content\").fadeIn(\"slow\");\n                // Set url of content.\n                $(\"#uploader_content\").html(\"<iframe src=\\\"\" + url + \"\\\" width=\\\"100%\\\" height=\\\"100%\\\">\");\n                // Cntering content.\n                centeringModalSyncer(\"#uploader_content\");\n\n                $(parent.window).resize(function() {\n                    centeringModalSyncer(\"#uploader_content\");\n                });\n\n                return true;\n            }\n\n            /**\n             * This function centerize modal window.\n             * @access public\n             * @param {object} contentPanel - HTML element of content panel.\n             */\n            function centeringModalSyncer(contentPanel) {\n                if (timer !== false) {\n                    clearTimeout(timer);\n                }\n\n                timer = setTimeout(function() {\n                    // Get width and height of window.\n                    var w = $(window).width();\n                    var h = $(window).height();\n\n                    // Get width and height of modal content.\n                    var cw = $(contentPanel).outerWidth();\n                    var ch = $(contentPanel).outerHeight();\n\n                    // Execute centering of modal window.\n                    $(contentPanel).css({\"left\": ((w - cw) / 2) + \"px\", \"top\": ((h - ch) / 2) + \"px\"});\n                }, 200);\n            }\n\n            $(\"#id_upload_media\").on(\"click\", function() {\n                fadeInUploaderWindow(uploaderUrl);\n            });\n        }\n    };\n});\n"],"file":"loaduploader.min.js"}