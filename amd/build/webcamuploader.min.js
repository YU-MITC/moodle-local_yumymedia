function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("local_yumymedia/webcamuploader",["jquery"],function(a){return{init:function init(){var K=0,L=0,M=0,N=!1,O="",P=400,Q=300,R=null,S=null,T="",U=null,V=null,W=null,X=window.URL&&window.URL.createObjectURL?function(a){return window.URL.createObjectURL(a)}:window.webkitURL&&window.webkitURL.createObjectURL?function(a){return window.webkitURL.createObjectURL(a)}:void 0,Y=window.URL&&window.URL.revokeObjectURL?function(a){return window.URL.revokeObjectURL(a)}:window.webkitURL&&window.webkitURL.revokeObjectURL?function(a){return window.webkitURL.revokeObjectURL(a)}:void 0,Z={VIDEO:1,IMAGE:2,AUDIO:5},$={TRUE:1,FALSE:0,NULL:-1},_={ENTRY_IMPORTING:-2,ENTRY_CONVERTING:-1,ENTRY_IMPORT:0,ENTRY_PRECONVERT:1,ENTRY_READY:2,ENTRY_DELETED:3,ENTRY_PENDING:4,ENTRY_MODERATE:5,ENTRY_BLOCKED:6,ENTRY_NO_CONTENT:7},aa={PENDING:0,PARTIAL_UPLOAD:1,FULL_UPLOAD:2,CLOSED:3,TIMED_OUT:4,DELETED:5};function b(){var a=navigator.userAgent.toLowerCase(),b=navigator.appVersion.toLowerCase(),c=-1<a.indexOf("msie")&&-1==a.indexOf("opera"),d=c&&-1<b.indexOf("msie 6."),e=c&&-1<b.indexOf("msie 7."),f=c&&-1<b.indexOf("msie 8."),g=c&&-1<b.indexOf("msie 9."),h=c&&-1<b.indexOf("msie 10."),i=-1<a.indexOf("trident/7");return c||d||e||f||g||h||i}function c(){var a=navigator.userAgent.toLowerCase(),b=-1<a.indexOf("edge"),c=-1<a.indexOf("chrome")&&-1==a.indexOf("edge"),d=-1<a.indexOf("firefox"),e=-1<a.indexOf("safari")&&-1==a.indexOf("chrome"),f=-1<a.indexOf("opera");return!0===b&&!1===c&&!1===d&&!1===e&&!1===f}function d(){if(b()||c()){var d="";if(b()){d="Internet Explorer"}else{d="Edge"}require(["core/str"],function(b){var c=b.get_string("unsupported_browser","local_yumymedia",d);a.when(c).done(function(a){h(a)})});return!0}return!1}function e(){var a,b=navigator.userAgent;if(b.match(/iPhone|iPad|iPod/)){a="iOS"}else if(b.match(/Android|android/)){a="Android"}else if(b.match(/Linux|linux/)){a="Linux"}else if(b.match(/Win(dows)/)){a="Windows"}else if(b.match(/Mac|PPC/)){a="Mac OS"}else if(b.match(/CrOS/)){a="Chrome OS"}else{a="Other"}return a}function f(){var b=e();if("iOS"==b||"Android"==b){require(["core/str"],function(c){var d=c.get_string("unsupported_os","local_yumymedia",b);a.when(d).done(function(a){h(a)})});return!0}return!1}function g(){var a=window.location.protocol;if(-1!=a.indexOf("https")){return!0}return!1}function h(b){require(["core/str"],function(c){var d=c.get_string("back_label","local_yumymedia",null);a.when(d).done(function(c){var d="";d="<p><font color=\"red\">"+b+"</font></p>";d=d+"<br><input type=button id=\"backToMymedia\" name=\"backToMymedia\" value=\"";d=d+c+"\" />";a("#upload_info").html(d);a("#backToMymedia").on("click",function(){s()})})})}function i(b){var c="<video id=\"webcam\" width=\""+P+"\" height=\""+Q+"\" ";c=c+"autoplay=\"false\" oncontextmenu=\"return false;\" controls></video>";a("#videospan").html(c);document.getElementById("webcam").src=b;document.getElementById("webcam").pause();document.getElementById("webcam").currentTime=0}function j(b){var c="<video id=\"webcam\" width=\""+P+"\" height=\""+Q+"\" ";c=c+"autoplay=\"0\" muted oncontextmenu=\"return false;\"></video>";a("#videospan").html(c);a("#webcam").attr("src",b)}function k(){a("#recstop").attr("src",a("#stopurl").val());a("#recstop").off("click");a("#recstop").on("click",function(){l()});a("#leftspan").css("display","inline");a("#webcam").volume=0;V.start();require(["core/str"],function(b){var c=b.get_string("now_recording","local_yumymedia",null);a.when(c).done(function(b){a("#status").html("<font color=\"red\">"+b+"</font>")})})}function l(){V.ondataavailable=function(b){S=new Blob([b.data],{type:b.data.type});if(window.URL&&window.URL.createObjectURL){U=window.URL.createObjectURL(S)}else{U=window.webkitURL.createObjectURL(S)}i(U);M=S.size;var c="",d=0;if(M>1073741824){d=M/1073741824;c=d.toFixed(2)+" G"}else if(M>1048576){d=M/1048576;c=d.toFixed(2)+" M"}else if(1024<M){d=M/1024;c=d.toFixed(2)+" k"}else{c=M+" "}require(["core/str"],function(b){var d=b.get_string("video_preview","local_yumymedia",null);a.when(d).done(function(b){b="<font color=\"green\">"+b+"("+S.type+", ";b=b+c+"B).</font>";a("#status").html(b)})});O=p(S.type);N=o();if(!1===N){require(["core/str"],function(b){var c=b.get_string("wrong_filesize","local_yumymedia",null);a.when(c).done(function(a){window.alert(a)})})}r();T=a("#filename").val()+"."+q(S.type)};if(R.getTracks!==void 0&&null!==R.getTracks){for(var b=R.getTracks(),c=b.length-1;0<=c;--c){b[c].stop()}if(document.getElementById("webcam").srcObject!==void 0){document.getElementById("webcam").srcObject=null}}V.stop();a("#leftspan").css("display","none");a("#rightspan").css("display","inline");a("#remove").on("click",function(){m()})}function m(){if(!g()){require(["core/str"],function(b){var c=b.get_string("require_https","local_yumymedia");a.when(c).done(function(a){h(a)})});return}if(d()||f()){return}navigator.mediaDevices=navigator.mediaDevices||(navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function getUserMedia(a){return function(b,c){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,a,b,c)}}}:null);try{if(null===navigator.mediaDevices||navigator.mediaDevices===void 0||null===MediaRecorder||MediaRecorder===void 0){require(["core/str"],function(b){var c=b.get_string("disable_webrtc","local_yumymedia",null);a.when(c).done(function(a){h(a)})});return}if(null===X||X===void 0||null===Y||Y===void 0){require(["core/str"],function(b){var c=b.get_string("disable_objecturl","local_yumymedia",null);a.when(c).done(function(a){h(a)})});return}}catch(b){require(["core/str"],function(b){var c=b.get_string("disable_webrtc","local_yumymedia",null);a.when(c).done(function(a){h(a)})});window.console.log(b);return}j(null);if(null!==U){if(window.URL&&window.URL.revokeObjectURL){window.URL.revokeObjectURL(U)}else{window.webkitURL.revokeObjectURL(U)}U=null;S=null}if(null!==R){if(R.getTracks!==void 0||null!==R.getTracks){for(var b=R.getTracks(),c=b.length-1;0<=c;--c){b[c].stop()}if(document.getElementById("webcam").srcObject){document.getElementById("webcam").srcObject=null}}else{R.stop()}}M=0;N=!1;O="";a("#recstop").off("click");a("#remove").off("click");a("#webcam").off("ondataavailable");var e="",l=MediaSource||MediaRecorder;if(l.isTypeSupported("video/webm")){e="video/webm"}else if(l.isTypeSupported("video/mp4")){e="video/mp4"}else if(l.isTypeSupported("video/webm;codecs=vp8,opus")){e="video/webm; codecs=vp8,opus"}else if(l.isTypeSupported("video/webm;codecs=vp9,opus")){e="video/webm; codecs=vp9,opus"}else if(l.isTypeSupported("video/webm;codecs=vp8")){e="video/webm; codecs=vp8"}else{e="video/webm; codecs=vp9"}W={audioBitsPerSecond:128e3,videoBitsPerSecond:15e5,mimeType:e,audio:{echoCancellation:!1},video:{mandatory:{minWidth:320,minHeight:240,maxWidth:1280,maxHeight:720,minFrameRate:5,maxFrameRate:15},optional:[{facingMode:"user"}]}};var m=navigator.mediaDevices.getUserMedia(W);m.then(function(b){R=b;var c=document.getElementById("webcam");if(c.srcObject!==void 0){c.srcObject=R;c.play()}else{if(window.URL&&window.URL.createObjectURL){U=window.URL.createObjectURL(U)}else{U=window.webkitURL.createObjectURL(U)}a("#webcam").attr("src",U)}if(null!==MediaSource||MediaSource!==void 0){V=new MediaRecorder(R)}else{V=new MediaRecorder(R,W)}a("#recstop").attr("src",a("#recurl").val());a("#recstop").on("click",function(){k(R)});a("#leftspan").css("display","inline");a("#rightspan").css("display","none");require(["core/str"],function(b){var c=b.get_string("camera_preview","local_yumymedia",null);a.when(c).done(function(b){a("#status").html(b)})});return 0}).catch(function(b){require(["core/str"],function(b){var c=b.get_string("unsupported_camera","local_yumymedia",null);a.when(c).done(function(a){h(a)})});window.console.log(b)});r()}function n(){var b=a(window).width(),c=a(window).height(),d=a("#modal_content").outerWidth(),e=a("#modal_content").outerHeight();a("#modal_content").css({left:(b-d)/2+"px",top:(c-e)/2+"px"})}function o(){if(0>=M){return!1}if(2e9<M){return!1}return!0}function p(a){if(-1!=a.indexOf("video/avi")||-1!=a.indexOf("video/x-msvideo")||-1!=a.indexOf("video/mpeg")||-1!=a.indexOf("video/mpg")||-1!=a.indexOf("video/mp4")||a.indexOf("video/ogg")||-1!=a.indexOf("video/quicktime")||-1!=a.indexOf("video/VP8")||-1!=a.indexOf("video/x-flv")||-1!=a.indexOf("video/x-f4v")||-1!=a.indexOf("video/x-matroska")||-1!=a.indexOf("video/x-ms-wmv")||-1!=a.indexOf("video/webm")){return"video"}if(-1!=a.indexOf("audio/ac3")||-1!=a.indexOf("audio/ogg")||-1!=a.indexOf("audio/mpeg")||-1!=a.indexOf("audio/mp4")||-1!=a.indexOf("audio/mp3")||-1!=a.indexOf("audio/wav")||-1!=a.indexOf("audio/x-ms-wma")){return"audio"}if(-1!=a.indexOf("image/gif")||-1!=a.indexOf("image/jpeg")||-1!=a.indexOf("image/png")||-1!=a.indexOf("image/tiff")){return"image"}return"N/A"}function q(a){if(-1!=a.indexOf("video/avi")||-1!=a.indexOf("video/x-msvideo")){return"avi"}if(-1!=a.indexOf("video/mpeg")||-1!=a.indexOf("video/mpg")||-1!=a.indexOf("audio/mpeg")||-1!=a.indexOf("audio/mpg")){return"mpeg"}if(-1!=a.indexOf("video/mp4")||-1!=a.indexOf("video/m4v")||-1!=a.indexOf("audio/mp4")){return"mp4"}if(-1!=a.indexOf("video/ogg")){return"ogg"}if(-1!=a.indexOf("video/quicktime")){return"mov"}if(-1!=a.indexOf("video/VP8")||-1!=a.indexOf("video/VP9")||-1!=a.indexOf("video/vp8")||-1!=a.indexOf("video/vp9")||-1!=a.indexOf("video/webm")){return"webm"}if(-1!=a.indexOf("video/x-flv")||-1!=a.indexOf("video/x-f4v")){return"flv"}if(-1!=a.indexOf("video/x-matroska")){return"mkv"}if(-1!=a.indexOf("video/x-ms-wmv")){return"wmv"}if(-1!=a.indexOf("audio/ac3")){return"ac3"}if(-1!=a.indexOf("audio/ogg")){return"ogg"}if(-1!=a.indexOf("audio/wav")){return"wav"}if(-1!=a.indexOf("audio/x-ms-wma")){return"wma"}if(-1!=a.indexOf("image/gif")){return"gif"}if(-1!=a.indexOf("image/jpeg")){return"jpg"}if(-1!=a.indexOf("image/png")){return"png"}if(-1!=a.indexOf("image/tiff")){return"tiff"}return"webm"}function r(){if(null===U||null===S||0===S.size||!1===N||""===a("#name").val()||""===a("#tags").val()||""===O||"N/A"===O){a("#entry_submit").prop("disabled",!0);a("#entry").val("")}else{a("#entry_submit").prop("disabled",!1)}}function s(){location.href="./yumymedia.php"}function t(){a(this).blur();if(a("#modal_window")[0]){return!1}var b=document.documentElement,c=document.body;K=b.scrollLeft||c.scrollLeft;L=b.scrollTop||c.scrollTop;a("body").append("<div id=\"modal_window\"></div>");a("#modal_window").fadeIn("slow");n();a("#modal_content").fadeIn("slow");return!0}function u(){window.scrollTo(K,L);a("#modal_content,#modal_window").fadeOut("slow",function(){a("#modal_window").remove();a("#modal_content").remove()})}function v(){require(["core/str"],function(b){var c=b.get_string("back_label","local_yumymedia",null);a.when(c).done(function(b){var c="<br><input type=button id=\"backToMymedia\" name=\"backToMymedia\" value=\"";c+=b+"\" />";a("#modal_content").append(c);a("#backToMymedia").on("click",function(){s()})})})}function w(b){a("#modal_content").append("<font color=\"red\">"+b+"</font><br>");v()}function x(b,c,d,e,f){require(["core/str","core/notification"],function(g,h){g.get_strings([{key:"upload_success",component:"local_yumymedia"},{key:"entryid_header",component:"local_yumymedia"},{key:"name_header",component:"local_yumymedia"},{key:"tags_header",component:"local_yumymedia"},{key:"desc_header",component:"local_yumymedia"},{key:"creatorid_header",component:"local_yumymedia"},{key:"back_label",component:"local_yumymedia"}]).then(function(g){u();var h="<h3>"+g[0]+"</h3>";h+="<table border=\"2\" cellpadding=\"5\">";h+="<tr><td>"+g[1]+"</td><td>"+b+"</td></tr>";h+="<tr><td>"+g[2]+"</td><td>"+c+"</td></tr>";h+="<tr><td>"+g[3]+"</td><td>"+d+"</td></tr>";h+="<tr><td>"+g[4]+"</td><td>"+e+"</td></tr>";h+="<tr><td>"+g[5]+"</td><td>"+f+"</td></tr>";h+="</table>";h+="<br>";h+="<input type=button id=\"backToMymedia\" name=\"backToMymedia\" value=\"";h+=g[6]+"\" />";a("#upload_info").html(h);a("#backToMymedia").on("click",function(){s()});return 0}).fail(h.exception)})}function y(){a("#file_info").html("");a("#type").val("")}function z(a){if(!0===/["$%&'~^\\`/]/.test(a)){return!1}else{return!0}}function A(a){if(!0===/[!"#$%&'~|^\\@`()[\]{}:;+*/=<>?]/.test(a)){return!1}else{return!0}}function B(){var b=a("#name").val(),c=a("#tags").val(),d=a("#description").val(),e=!0;if(!1===z(b)){require(["core/str"],function(b){var c=b.get_string("wrong_name","local_yumymedia",null);a.when(c).done(function(a){window.alert(a)})});e=!1}if(!1===A(c)){require(["core/str"],function(b){var c=b.get_string("wrong_tags","local_yumymedia",null);a.when(c).done(function(a){window.alert(a)})});e=!1}if(!1===z(d)){require(["core/str"],function(b){var c=b.get_string("wrong_desc","local_yumymedia",null);a.when(c).done(function(a){window.alert(a)})});e=!1}return e}function C(){if(!1===B()){return!1}if(!1===o()){require(["core/str"],function(b){var c=b.get_string("wrong_filesize","local_yumymedia",null);a.when(c).done(function(a){window.alert(a)})});return!1}t();D();return!0}function D(){var b=a("#kalturahost").val(),c=a("#ks").val();F(b,c)}function E(b,c,d){var e=new FormData,f;e.append("action","delete");e.append("ks",c);e.append("uploadTokenId",d);a.ajax(b+"/api_v3/service/uploadToken/action/delete",{type:"POST",data:e,cache:!1,contentType:!1,scriptCharset:"utf-8",processData:!1,async:!0,dataType:"xml"}).done(function(a){if(null===a){f=!1}f=!0}).fail(function(a){f=!1;if(null!==a){window.console.dir(a)}});return f}function F(b,c){var d,e,f=b+"/api_v3/service/uploadToken/action/add?ks="+c;f=f+"&uploadToken:objectType=KalturaUploadToken";f=f+"uploadToken:fileName="+encodeURI(T);f=f+"&uploadToken:fileSize="+S.size;f=f+"&uploadToken:autoFinalize="+$.NULL;a.ajax(f,{type:"GET",cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",dataType:"xml"}).done(function(f){if(null===f){w("Cannot create upload token !<br>(Cannot get a XML response.)");return}e=a(f).find("code");if(null!==e&&_typeof(e)!==void 0&&""!==e.text()){w("Cannot create upload token !<br>("+e.text()+")");return}e=a(f).find("status");if(null===e||_typeof(e)===void 0||""===e.text()){w("Cannot create upload token !<br>(Cannot get status of upload token.)");return}var g=e.text();if(g!=aa.PENDING){w("Cannot create upload token !<br>(UPLOAD_TOKEN_STATUS : "+g+")");return}e=a(f).find("id");if(null===e||_typeof(e)===void 0||""===e.text()){w("Cannot create uplaod token !<br>(Cannot get an uploadTokenId.)");return}d=e.text();setTimeout(function(){G(b,c,d)},1e3)}).fail(function(a){if(null!==a){window.console.dir(a)}w("Cannot create upload token !<br>(Cannot connect to kaltura server.)")})}function G(b,c,d){var e,f,g="",h="",i="",j="",k="",l=a("#name").val(),m=a("#tags").val(),n=a("#description").val(),o=a("#controlId").val(),p=a("#creatorId").val();l=l.trim();m=m.trim();if(null!==n){n=n.trim()}var q=new FormData;q.append("action","add");q.append("ks",c);q.append("entry:objectType","KalturaMediaEntry");q.append("entry:mediaType",Z.VIDEO);q.append("entry:sourceType",1);q.append("entry:name",l);q.append("entry:tags",m);if(null!==n&&""!==n){q.append("entry:description",n)}else{q.append("entry:description","")}q.append("entry:categories",a("#categories").val());if(null!==o&&""!==o){q.append("entry:accessControlId",o)}q.append("entry:creatorId",p);q.append("entry:userId",p);a.ajax(b+"/api_v3/service/media/action/add",{type:"POST",data:q,cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",processData:!1,dataType:"xml"}).done(function(l){if(null===l||_typeof(l)===void 0){E(b,c,d);w("Cannot create media entry !<br>(Cannot get a XML response.)");return}e=a(l).find("code");if(null!==e&&_typeof(e)!==void 0&&""!==e.text()){E(b,c,d);w("Cannot create media entry !<br>("+e.text()+")");return}e=a(l).find("status");if(null===e||_typeof(e)===void 0||""===e.text()){E(b,c,d);w("Cannot create media entyry !<br>(Cannot get a mediaEntryStatus.)");return}f=e.text();if(f!=_.ENTRY_NO_CONTENT){E(b,c,d);w("Cannot create media entry!<br>(mediaEntryStatus: "+f+")");return}e=a(l).find("id");g=e.text();e=a(l).find("name");h=e.text();e=a(l).find("tags");i=e.text();e=a(l).find("description");if(null!==e&&_typeof(e)!==void 0&&""!==e.text()){j=e.text()}else{j=""}e=a(l).find("creatorId");k=e.text();if(null===g||""===g||null===h||""===h||null===i||""===i||null===k||""===k||""!==n&&(null===j||""===j)){E(b,c,d);w("There exists wrong information(s) <br>");return}setTimeout(function(){H(b,c,d,g)},1e3)}).fail(function(a){if(null!==a){window.console.dir(a)}E(b,c,d);w("Cannot create media entry !<br>(Cannot connect to kaltura server.)")})}function H(b,c,d,e){var f,g=new FormData;require(["core/str","core/notification"],function(h,i){h.get_strings([{key:"recorder_uploading",component:"local_yumymedia"},{key:"progress",component:"local_yumymedia"},{key:"attach_file",component:"local_yumymedia"}]).then(function(h){a("#modal_content").append(h[0]+"<br>");var i="<p>"+h[1];i=i+": <span id=\"pvalue\" style=\"color:#00b200\">0.00</span> %</p>";a("#modal_content").append(i);g.append("action","upload");g.append("ks",c);g.append("uploadTokenId",d);g.append("fileData",S,encodeURI(T),S.size);g.append("resume",!1);g.append("finalChunk",!0);g.append("resumeAt",0);a.ajax(b+"/api_v3/service/uploadToken/action/upload",{type:"POST",data:g,cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",processData:!1,dataType:"xml",xhr:function xhr(){var b=a.ajaxSettings.xhr();if(b.upload){b.upload.addEventListener("progress",function(b){if(b.lengthComputable){var c=parseInt(100*(b.loaded/b.total));a("#pvalue").html(c)}},!1)}return b}}).done(function(g){if(null===g){E(b,c,d);w("Cannot upload the video !<br>(Cannot get a XML response.)");return}f=a(g).find("code");if(null!==f&&_typeof(f)!==void 0&&""!==f.text()){E(b,c,d);w("Cannot upload the video !<br>("+f.text()+")");return}f=a(g).find("status");if(null===f||_typeof(f)===void 0||""===f.text()){E(b,c,d);w("Cannot upload the video !<br>(Cannot get an uploadTokenStatus.)");return}var i=f.text();if(i!=aa.FULL_UPLOAD&&i!=aa.PARTIAL_UPLOAD){E(b,c,d);w("Cannot upload the video !<br>(UPLOAD_TOKEN_STATUS : "+i+")");return}else{window.console.log("File chunk have been transmitted.")}a("#modal_content").append(h[2]+"<br>");setTimeout(function(){I(b,c,d,e)},1e3)}).fail(function(a){if(null!==a){window.console.dir(a)}E(b,c,d);w("Cannot upload the file !<br>(Cannot connect to contents server.)")});return 0}).fail(i.exception)})}function I(b,c,d,e){var f,g="",h="",i="",j="",k,l=new FormData;l.append("action","addContent");l.append("ks",c);l.append("entryId",e);l.append("resource:objectType","KalturaUploadedFileTokenResource");l.append("resource:token",d);a.ajax(b+"/api_v3/service/media/action/addContent",{type:"POST",data:l,cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",processData:!1,dataType:"xml"}).done(function(l){if(null===l||_typeof(l)===void 0){E(b,c,d);w("Cannot attach uploaded file !<br>(Cannot get a XML response.)");return}k=a(l).find("code");if(null!==k&&_typeof(k)!==void 0&&""!==k.text()){E(b,c,d);w("Cannot attach uploaded file !<br>("+k.text()+")");return}k=a(l).find("status");if(null===k||_typeof(k)===void 0||""===k.text()){E(b,c,d);w("Cannot attach uploaded file !<br>(Cannot get a mediaEntryStatus.)");return}f=k.text();if(f!=_.ENTRY_READY&&f!=_.ENTRY_PENDING&&f!=_.ENTRY_PRECONVERT&&f!=_.IMPORT&&f!=_.IMPORTING){E(b,c,d);w("Cannot attach uploaded file !<br>(mediaEntryStatus: "+f+")");return}k=a(l).find("id");e=k.text();k=a(l).find("name");g=k.text();k=a(l).find("tags");h=k.text();k=a(l).find("description");if(null!==k&&_typeof(k)!==void 0&&""!==k.text()){i=k.text()}else{i=""}k=a(l).find("creatorId");j=k.text();v();x(e,g,h,i,j)}).fail(function(a){if(null!==a){window.console.dir(a)}E(b,c,d);w("Cannot attach uploaded file !<br>(Cannot connect to kaltura server.)")})}function J(){var b=a("#kalturahost").val();a.ajax({type:"GET",url:b+"/api_v3/service/session/action/end",cache:!1}).done(function(a){if(null===a){window.console.log("Cannot delete the uploadToken ! (Cannot get a XML response.)")}else{window.console.log("Kaltura Session has been deleted.")}}).fail(function(a){window.console.log("Cannot delete the uploadToken ! (Cannot connect to kaltura server.)");if(null!==a){window.console.dir(a)}})}a(window).on("change",function(){r()});a(window).on("load",function(){a("#name").val("");a("#tags").val("");a("#description").val("")});m();a(window).on("unload",function(){if(null!==U){if(window.URL&&window.URL.revokeObjectURL){window.URL.revokeObjectURL(U)}else{window.webkitURL.revokeObjectURL(U)}S=null;U=null}if(null!==R){if(R.getTracks){for(var a=R.getTracks(),b=a.length-1;0<=b;--b){a[b].stop()}}else{R.stop()}if(document.getElementById("webcam").srcObject){document.getElementById("webcam").srcObject=null}}J()});a(window).resize(n);a("#uploader_cancel").on("click",function(){s()});a("#name").on("change",function(){r()});a("#tags").on("change",function(){r()});a("#entry_submit").on("click",function(){C()});a("#entry_reset").on("click",function(){y()})}}});
//# sourceMappingURL=webcamuploader.min.js.map
